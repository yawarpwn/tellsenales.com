---
import BaseLayout from './base-layout.astro'
import PageContent from '@components/page-content/page-content.astro'
import PostsRightSidebar from '@components/right-sidebar/posts-right-sidebar.astro'
import TableOfContent from '@components/right-sidebar/table-of-contents'
import MobileContent from '@components/right-sidebar/mobile-content'

import { getNavLinks } from '@utils/get-nav-links'
const { previous, next } = getNavLinks(Astro)
const { content = {} } = Astro.props
const headings = Astro.props.headings
---

<BaseLayout {...Astro.props}>
  <PostsRightSidebar slot="secondary-sidebar" {...{content, headings}} />
  <PageContent {...{content, previous, next}}>
    {
      headings && (
        <Fragment slot="before-article">
          <nav>
            <MobileContent headings={headings} />
          </nav>
        </Fragment>
      )
    }
    <slot />
  </PageContent>
</BaseLayout>
