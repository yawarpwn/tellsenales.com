---
import PageHeader from '@components/page-header/page-header.astro'
import MainLayout from '@layouts/main-layout.astro'
const content = {
	title: 'Contacta con nosotros',
	description: 'Contacto con Tell Señales para mayor información y ateción personalizada',
	image: '/assets/images/contacto.webp',
}
---

<MainLayout {content}>
	<PageHeader title="contacto" />
	<div class="grid gap-10 md:grid-cols-2 px-4 md:px-0">
		<section>
			<div class="mt-4">
				<p class="mb-8 text-xl font-bold">
					Tell Señales está interesad? en sus clientes. Aprovecha nuestros datos y contáctate con
					nosotros.
				</p><div>
					<div class="mb-8 p-4 border border-orange-500 rounded-md">
						<div class="flex items-center">
							<span class="text-secondary"
								><svg
									stroke="currentColor"
									fill="currentColor"
									stroke-width="0"
									viewBox="0 0 24 24"
									class="h-5 w-5"
									height="1em"
									width="1em"
									xmlns="http://www.w3.org/2000/svg"
									><path
										d="M12 14c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"
									></path><path
										d="M11.42 21.814a.998.998 0 0 0 1.16 0C12.884 21.599 20.029 16.44 20 10c0-4.411-3.589-8-8-8S4 5.589 4 9.995c-.029 6.445 7.116 11.604 7.42 11.819zM12 4c3.309 0 6 2.691 6 6.005.021 4.438-4.388 8.423-6 9.73-1.611-1.308-6.021-5.294-6-9.735 0-3.309 2.691-6 6-6z"
									></path>
								</svg>
							</span><div class="ml-4">
								<h5>Dirección:</h5>
								<p>Av. Argentina 538 Int. 1160 - Lima</p>
								<p>Av. Maquinaria 325 - Carmen de la Legua</p>
							</div>
						</div>
					</div><div class="mb-8 p-4 border border-secondary rounded-md">
						<div class="flex items-center">
							<span class="text-secondary"
								><svg
									stroke="currentColor"
									fill="currentColor"
									stroke-width="0"
									viewBox="0 0 16 16"
									class="h-5 w-5"
									height="1em"
									width="1em"
									xmlns="http://www.w3.org/2000/svg"
									><path
										d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"
									></path>
								</svg>
							</span><div class="ml-4">
								<h5>Whatsapp:</h5><p>971 531 018 / 992 536 019</p>
							</div>
						</div>
					</div><div class="mb-8 p-4 border border-secondary rounded-md">
						<div class="flex items-center">
							<span class="text-secondary"
								><svg
									stroke="currentColor"
									fill="none"
									stroke-width="0"
									viewBox="0 0 24 24"
									class="h-5 w-5"
									height="1em"
									width="1em"
									xmlns="http://www.w3.org/2000/svg"
									><path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
									></path>
								</svg>
							</span><div class="ml-4">
								<h5>Email:</h5><p>ventas@tellsenales.com</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<div class="">
			<h4 class="mb-4 text-2xl uppercase">Dejános un mensaje</h4>
			<form class="" id="contact-form">
				<div class="">
					<input placeholder="Nombre" type="text" name="name" class="" required />
				</div><div class="">
					<input placeholder="Email" type="email" name="email" class="" pattern="^[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})$" required />
				</div><div class="">
					<div class="mt-5">
						<textarea placeholder="Mensaje" name="message" class="" data-pattern='^.{25,255}$' required></textarea>
					</div><div class="mt-5">
						<button type="submit" class="w-full bg-secondary rounded-lg p-2 text-white" id='input-button'>Enviar</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</MainLayout>
<script>
	const $contactForm = document.querySelector<HTMLFormElement>('#contact-form')!
  const $inputButton = document.querySelector<HTMLButtonElement>('#input-button')!

	$contactForm.addEventListener('submit', (e) => {
		e.preventDefault()
		const data = Object.fromEntries(new FormData(e.target))
		const url = 'https://nodemailer-service.onrender.com/send-mail'

		const options = {
			method: 'POST',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify(data),
		}

    $inputButton.setAttribute('disabled', "true")
    $inputButton.textContent = 'enviando...'
		fetch(url, options)
			.then(() => {
        $inputButton.removeAttribute('disabled')
        $inputButton.textContent = 'Enviar'
        alert('mensaje recibido')
        location.href = '/'
      })
			.catch((err) => console.error(err))

	})
</script>
<style>
	input {
		display: block;
		width: 100%;
		margin: 10px 15px 10px 0px;
		margin-top: 10px;
		margin-bottom: 10px;
		padding: 10px;
		border: none;
		border-radius: 0.5rem;

		&:focus {
			border: orange;
			outline: none;
		}
	}

  button[disabled] {
    background: gray;
    user-select: none;
  }

	textarea {
		display: block;
		resize: none;
		padding: 10px;
		width: 100%;
		min-height: 150px;
		border: none;
		border-radius: 0.5rem;

		&:focus {
			border: orange;
			outline: none;
		}
	}
</style>
